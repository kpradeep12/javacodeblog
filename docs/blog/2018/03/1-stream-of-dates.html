<!DOCTYPE html>
<html lang="en">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <title>Stream of dates with LocalDate</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../../css/clean-blog.css" rel="stylesheet">
    <link href="../../../css/3-portfolio-theme.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <!-- link rel="shortcut icon" href="../../../favicon.ico" -->
  </head>
  <body>
   

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark py-0">
  <a class="navbar-brand" href="#">Java Thought</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse flex-row-reverse" id="navbarSupportedContent">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="../../../index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../../../about.html">About</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/archive.html">Archive</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../../../contact.html">Contact</a>
      </li>
    </ul>
  </div>
</nav>
    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('../../../img/home-bg.jpg')">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="site-heading p-5">
                        <h1>Java Thought</h1>
                        <hr class="small">
                        <span class="subheading">Sharing my Java experiments</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <h1 class="mt-4">Stream of dates with LocalDate</h1>
                    <p class="mt-0">Posted on January 1, 2018 at 12:00 PM</p>
                    <hr>
                    <!-- Preview Image -->
                    <img class="img-fluid rounded" src="../../../img/null" alt="">


                    <div class="paragraph"> 
 <p>I want a list of all dates with starting range from Jan 15, 2018 to Feb 20, 2018. I can generate this list using the new ‘datesUntil’ method in LocalDate class. This method is introduced in Java 9 and I recently found out this method while browsing through Java API and quickly did some code experiments using JShell. I thought this is very useful method and wanted to share my experiments in this article.</p> 
</div> 
<div class="paragraph"> 
 <p>Below is the definition of this method. :source-highlighter: prettify</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight linenums"><code class="language-java" data-lang="java">public Stream&lt;LocalDate&gt; datesUntil​(LocalDate endExclusive)</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>This method returns stream of LocalDate objects so we can process these dates in a stream. To use this method we need fromDate and toDate so we can generate stream of LocalDate’s.</p> 
</div> 
<div class="paragraph"> 
 <p>I fired up my JShell and executed below code snippets. JShell is a quick and best way to experiment small code snippets like below. I always love to use JShell for these type of experiments. I will also give some tips on JShell usage on the way while we do this experiment.</p> 
</div> 
<div class="paragraph"> 
 <p>You need Java 9 to run JShell. Go to command prompt/terminal and execute ‘jshell’ command.</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">~ $ jshell
| Welcome to JShell -- Version 9.0.4
| For an introduction type: /help intro
jshell&gt;</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>By Default java.time package is not imported in JShell so we need to import this package. (You can check all available imports by executing /imports in JShell)</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">jshell&gt; import java.time.*</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>Create fromDate and toDate and stream using datesUntil method</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">jshell&gt; LocalDate fromDate = LocalDate.of(2018,1,15)
fromDate ==&gt; 2018-01-15
jshell&gt; LocalDate toDate = LocalDate.of(2018,2,20)
toDate ==&gt; 2018-02-20
jshell&gt; Stream&lt;LocalDate&gt; dates = fromDate.datesUntil(toDate)</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>Now lets apply forEach to see all dates with in this range.</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">jshell&gt; dates.forEach(System.out::println)
2018-01-15
2018-01-16
...
...
2018-02-18
2018-02-19</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>Nice, we got all dates with in the range. Note that toDate is not in the output because it is a endExclusive parameter. See the declaration of datesUntil method which I mentioned above. If you want to include toDate in the range then quick way to add a day is toDate.plusDays(1)</p> 
</div> 
<div class="paragraph"> 
 <p>There is another overloaded ‘datesUntil’ method which is even more useful, it takes Period as second parameter. So we get stream with incremental steps.</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight linenums"><code class="language-java" data-lang="java">public Stream&lt;LocalDate&gt; datesUntil​(LocalDate endExclusive, Period step)</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>I will use same above fromDate and toDate to create another stream with weekly increments.</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">jshell&gt; Stream&lt;LocalDate&gt; weekly = fromDate.datesUntil(toDate, Period.ofWeeks(1))
weekly ==&gt; java.util.stream.LongPipeline$1@59494225
jshell&gt; weekly.forEach(System.out::println)
2018-01-15
2018-01-22
2018-01-29
2018-02-05
2018-02-12
2018-02-19</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>Nice, we got dates on weekly intervals. We can apply some functions on these streams and can do lot more interesting stuff like creating continues events for the calendar or scheduling jobs and many more…</p> 
</div> 
<div class="paragraph"> 
 <p>Note: Once a stream is executed then you can not reuse it. If I execute above code again then I get IllegalStateException</p> 
</div> 
<div class="listingblock"> 
 <div class="content"> 
  <pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">jshell&gt; weekly.forEach(System.out::println)
| java.lang.IllegalStateException thrown: stream has already been operated upon or closed</code></pre> 
 </div> 
</div> 
<div class="paragraph"> 
 <p>One quick way to fix this is to declare a supplier and reuse it every time. I learnt this tip from Baeldung blog. <a href="http://www.baeldung.com/java-stream-operated-upon-or-closed-exception">Here</a> is the more information on this tip.</p> 
</div>
                </div>
            </div>
        </div>
    </article>

    <hr>

		<div id="push"></div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col">
                    <ul class="list-inline text-center list-unstyled">
                        <li class="list-inline-item">
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <a href="#">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Baked with <a href="http://jbake.org">JBake v2.6.1</a></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="../../../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../../../js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript 
    <script src="../../../js/clean-blog.min.js"></script>
    -->
    
  </body>
</html>