<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">
    <meta name="google-site-verification" content="zkTSlJd8qxF4ZHbWWxyG0Prqnevef8dGSLkZeHFRW2Y" />
    
    <title>Simple Introduction to ForkJoin Framework - Part 2</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../../css/clean-blog.css" rel="stylesheet">
    <link href="../../../css/3-portfolio-theme.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <!-- link rel="shortcut icon" href="../../../favicon.ico" -->
  </head>
  <body>
   

        <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="../../../index.html">Tech Stack Java</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="../../../index.html">Home</a>
            </li>
            <!--<li class="nav-item">
                <a class="nav-link" href="../../../about.html">About</a>
            </li>-->
            <li class="nav-item">
                <a class="nav-link" href="/archive.html">Archive</a>
            </li>
            <!--<li class="nav-item">
                <a class="nav-link" href="../../../contact.html">Contact</a>
            </li>-->
          </ul>
        </div>
      </div>
    </nav>
    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('../../../img/home-bg.jpg')">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="site-heading">
                        <h1>Tech Stack Java</h1>
                        <hr class="small">
                        <span class="subheading">Sharing my Java experiments</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="mt-4">Simple Introduction to ForkJoin Framework - Part 2</h1>
                    <p class="mt-0 small">Posted on May 03, 2018</p>
                    <hr>
                    <!-- Preview Image -->
                    <img class="img-fluid rounded post-image" src="../../../img/banners/blog-banner-strategy-design-pattern.png" alt="">
                    <div id="preamble"> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>ForkJoin framework allows us to execute tasks in a thread based environment. We need to pass a task to this framework so internally this task will be executed on a thread. This framework provides all the required utility classes which will handle all nitty-gritty things like maintaining the thread pool and running the tasks, we just need to pass the task to it. This framework in based on two main classes; ForkJoinPool and ForkJoinTask. Understanding these two classes is necessary to learn about this framework. In the below sections we will see how these classes works.</p> 
  </div> 
 </div> 
</div> 
<div class="sect3"> 
 <h4 id="forkjoinpool">ForkJoinPool</h4> 
 <div class="paragraph"> 
  <p>ForkJoinPool maintains a pool of light weight threads. These light weight threads are special implementation of normal threads and they are available only in ForkJoin framework. These threads are light weight because it consumes less resources than comparing to normal threads and takes less resources in switching. Since they are the lighter weight so there will be less performance cost in maintaining this pool. This is one of the advantage using ForkJoinPool.</p> 
 </div> 
 <div class="paragraph"> 
  <p>Each thread in the pool will have its own queue. This queue will gets filled with the tasks. For example, if we have two threads in the pool then each thread will have its own queue. Internally ForkJoinPool uses work-stealing algorithm. This algorithm will make the thread to complete its pending tasks and if there are no more tasks left then it steals work from the queue of other threads. If thread A completed its tasks in the queue then instead of waiting for the next task it will steal from thread B. This is the reason ForkJoinPool will make resource utilization fully by not keeping threads idle. ForkJoin framework is best when we have processor intensive tasks because it keeps processor busy.</p> 
 </div> 
</div> 
<div class="sect3"> 
 <h4 id="forkjointask">ForkJoinTask</h4> 
 <div class="paragraph"> 
  <p>ForkJoinTask can be any task which can be divided into subtasks. This division is called fork. This forking happens until the task is small enough to work on. Once the task is divided into small enough, then this task will sit in a waiting queue of any one of the thread in a pool to get executed.</p> 
 </div> 
 <div class="paragraph"> 
  <p>Once the subtasks are executed, then the result of each subtasks are joined together. This joining goes until it reaches the first forked task where the join will produce the result of the main task.</p> 
 </div> 
 <div class="paragraph"> 
  <p>This works like a divide and conquer problem. First the task is divided in to small enough to work and then the result of all subtasks are joined back to get the result. Think this is like a tree structure, below image shows the details;</p> 
 </div> 
 <div class="paragraph"> 
  <p>image</p> 
 </div> 
 <div class="paragraph"> 
  <p>Below is the list of some example tasks which can be implemented using ForkJoinTask;</p> 
 </div> 
 <div class="ulist"> 
  <ul> 
   <li> <p>Sorting an array: If we divide an array we get sub-arrays. These sub-arrays can be sorted and then we can merge back to make whole array sorted.</p> </li> 
   <li> <p>Processing images: Images are two dimensional arrays. We can divide it into sub-arrays and then merge back to get the result.</p> </li> 
  </ul> 
 </div> 
 <div class="paragraph"> 
  <p>Not all tasks are divisible for example, making a network call or any algorithm which can not be divisible.</p> 
 </div> 
 <div class="paragraph"> 
  <p>ForkJoinTask is an abstract class so we can not directly use it, instead we can extend any of the three abstract classes which extends ForkJoinTask. Based on the type of the task we can extend any one of these three classes.</p> 
 </div> 
 <div class="paragraph"> 
  <p>image.</p> 
 </div> 
 <div class="ulist"> 
  <ul> 
   <li> <p><strong>RecursiveAction:</strong> Works on the provided task but not returns any result.</p> </li> 
   <li> <p><strong>RecursiveTask:</strong> Works on the provided task and returns the result.</p> </li> 
   <li> <p><strong>CountedCompleter:</strong> While working on the input task it keep tracks of other threads and returns early if output is evaluated.</p> </li> 
  </ul> 
 </div> 
</div> 
<div class="sect3"> 
 <h4 id="conclusion">Conclusion</h4> 
 <div class="paragraph"> 
  <p>This article introduced internals of ForkJoinPool and ForkJoinTask classes. In the next part of this article I will show code examples. I will post next article soon.</p> 
 </div> 
</div>
                </div>
            </div>
        </div>
        
    </article>
    
    <hr>
    
		<div id="push"></div>
    
    <!-- Footer -->
    <footer class="bg-graphite">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-sm-6">
                    <div class="card" style="background-color: transparent;color: #fff!important;">
                        <div class="card-body">
                            <h5 class="card-title">Tags</h5>
                            <p class="card-text">
                                
                                    <a href="../../../tags/gof.html" class="badge badge-primary footer-tag-background">
                                        gof
                                    </a>
                                
                                    <a href="../../../tags/queue.html" class="badge badge-primary footer-tag-background">
                                        queue
                                    </a>
                                
                                    <a href="../../../tags/time.html" class="badge badge-primary footer-tag-background">
                                        time
                                    </a>
                                
                                    <a href="../../../tags/producer.html" class="badge badge-primary footer-tag-background">
                                        producer
                                    </a>
                                
                                    <a href="../../../tags/blockedqueue.html" class="badge badge-primary footer-tag-background">
                                        blockedqueue
                                    </a>
                                
                                    <a href="../../../tags/regex.html" class="badge badge-primary footer-tag-background">
                                        regex
                                    </a>
                                
                                    <a href="../../../tags/comparator.html" class="badge badge-primary footer-tag-background">
                                        comparator
                                    </a>
                                
                                    <a href="../../../tags/java10.html" class="badge badge-primary footer-tag-background">
                                        java10
                                    </a>
                                
                                    <a href="../../../tags/thread.html" class="badge badge-primary footer-tag-background">
                                        thread
                                    </a>
                                
                                    <a href="../../../tags/localdate.html" class="badge badge-primary footer-tag-background">
                                        localdate
                                    </a>
                                
                                    <a href="../../../tags/streams.html" class="badge badge-primary footer-tag-background">
                                        streams
                                    </a>
                                
                                    <a href="../../../tags/maven.html" class="badge badge-primary footer-tag-background">
                                        maven
                                    </a>
                                
                                    <a href="../../../tags/var.html" class="badge badge-primary footer-tag-background">
                                        var
                                    </a>
                                
                                    <a href="../../../tags/read.html" class="badge badge-primary footer-tag-background">
                                        read
                                    </a>
                                
                                    <a href="../../../tags/jshell.html" class="badge badge-primary footer-tag-background">
                                        jshell
                                    </a>
                                
                                    <a href="../../../tags/concurrentmodificationexception.html" class="badge badge-primary footer-tag-background">
                                        concurrentmodificationexception
                                    </a>
                                
                                    <a href="../../../tags/consumer.html" class="badge badge-primary footer-tag-background">
                                        consumer
                                    </a>
                                
                                    <a href="../../../tags/write.html" class="badge badge-primary footer-tag-background">
                                        write
                                    </a>
                                
                                    <a href="../../../tags/multithreading.html" class="badge badge-primary footer-tag-background">
                                        multithreading
                                    </a>
                                
                                    <a href="../../../tags/create.html" class="badge badge-primary footer-tag-background">
                                        create
                                    </a>
                                
                                    <a href="../../../tags/executor.html" class="badge badge-primary footer-tag-background">
                                        executor
                                    </a>
                                
                                    <a href="../../../tags/stream.html" class="badge badge-primary footer-tag-background">
                                        stream
                                    </a>
                                
                                    <a href="../../../tags/collections.html" class="badge badge-primary footer-tag-background">
                                        collections
                                    </a>
                                
                                    <a href="../../../tags/git.html" class="badge badge-primary footer-tag-background">
                                        git
                                    </a>
                                
                                    <a href="../../../tags/file.html" class="badge badge-primary footer-tag-background">
                                        file
                                    </a>
                                
                                    <a href="../../../tags/java.html" class="badge badge-primary footer-tag-background">
                                        java
                                    </a>
                                
                                    <a href="../../../tags/random.html" class="badge badge-primary footer-tag-background">
                                        random
                                    </a>
                                
                                    <a href="../../../tags/spring.html" class="badge badge-primary footer-tag-background">
                                        spring
                                    </a>
                                
                                    <a href="../../../tags/design pattern.html" class="badge badge-primary footer-tag-background">
                                        design pattern
                                    </a>
                                
                                    <a href="../../../tags/delete.html" class="badge badge-primary footer-tag-background">
                                        delete
                                    </a>
                                
                                    <a href="../../../tags/priorityqueue.html" class="badge badge-primary footer-tag-background">
                                        priorityqueue
                                    </a>
                                
                                    <a href="../../../tags/infinite.html" class="badge badge-primary footer-tag-background">
                                        infinite
                                    </a>
                                
                                    <a href="../../../tags/functional.html" class="badge badge-primary footer-tag-background">
                                        functional
                                    </a>
                                
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="card" style="background-color: transparent;color: #fff!important;">
                        <div class="card-body">
                            <h5 class="card-title">Recent Posts</h5>
                            <p class="card-text">
                                <ul class="list-unstyled">
                                    
                                        <li>
                                            <a href="../../../blog/2018/05/03-simple-introduction-to-forkjoin-framework-part1.html" class="footer-link">Simple Introduction to ForkJoin Framework - Part 1</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/05/03-simple-introduction-to-forkjoin-framework.html" class="footer-link">Simple Introduction to ForkJoin Framework</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/04/22-strategy-design-pattern.html" class="footer-link">Strategy design pattern</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/04/18-introduction-to-java-time.html" class="footer-link">Introduction to java.time</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/04/15-how-concurrentModificationException-is-thrown.html" class="footer-link">How ConcurrentModificationException is thrown?</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/04/11-regex-tester-with-spring-shell.html" class="footer-link">Regex Tester With Spring Shell</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/04/8-infinite-streams.html" class="footer-link">Infinite streams</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/04/3-recipes-for-optional.html" class="footer-link">Recipes for Optional</a>
                                        </li>
                                    
                                        <li>
                                            <a href="../../../blog/2018/03/28-functions-cheat-sheet.html" class="footer-link">Functions cheat sheet</a>
                                        </li>
                                    
                                </ul>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="card" style="background-color: transparent;color: #fff!important;">
                        <div class="card-body">
                            <h5 class="card-title">Author</h5>
                            <!--<img class="card-img-top" width="90" height="90" style="width:40%" src="../../../img/author-pic.jpeg" alt="Pradeep Kundarapu">-->
                            <p class="card-text">Pradeep Kundarapu</p>
                            <p class="m-0">Follow me</p>
                            <ul class="list-inline text-center list-unstyled float-left">
                                <li class="list-inline-item">
                                    <a href="https://twitter.com/k_pradeep4j"> 
                                        <span class="fa-stack fa-lg">
                                            <i class="fa fa-circle fa-stack-2x"></i>
                                            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--<div class="col">
                    
                    <p class="copyright text-muted">Baked with <a href="http://jbake.org">JBake v2.6.1</a></p>
                </div>-->
                
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="../../../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../../../js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript 
    <script src="../../../js/clean-blog.min.js"></script>
    -->
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115619272-2"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-115619272-2');
    </script>

  </body>
</html>